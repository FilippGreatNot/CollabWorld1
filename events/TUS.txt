## SETUP ##
add_namespace = tus
add_namespace = tus_coun1
add_namespace = tus_cap
add_namespace = tus_coun2
add_namespace = tus_civ_war

## MAIN ##

country_event = {
	id = tus.1
	title = tus.1.t
	desc = tus.1.d
	is_triggered_only = yes
	
	option = {
		name = tus.1.a
	}
}

country_event = {
	id = tus.2
	title = tus.2.t
	desc = tus.2.d
	is_triggered_only = yes
	
	option = {
		name = tus.2.a
	}
}

country_event = {
	id = tus.3
	title = tus.3.t
	desc = tus.3.d
	is_triggered_only = yes
	
	option = {
		name = tus.3.a
		add_stability = 0.1
		next_legacy_of_the_great_war_idea = yes
		next_legacy_of_the_great_war_idea = yes
		custom_effect_tooltip = TUS_modify_ppl_add_5
		custom_effect_tooltip = TUS_modify_mil_add_10
		add_to_variable = {
			var = TUS_Balbo_Pop_ppl
			value = 5
		}
		add_to_variable = {
			var = TUS_Balbo_Pop_mil
			value = 10
		}
	}
}

country_event = {
	id = tus.4
	title = tus.4.t
	desc = tus.4.d
	
	fire_only_once = yes
	
	trigger = {
		focus_progress = {
			focus = TUS_prepare_for_reunificatoin
			progress > 0
		}	
	}
	
	immediate = {
		add_timed_idea = {
			idea = TUS_prepare_for_reunificatoin_idea
			days = 150
		}
	}
	
	option = {
		name = tus.4.a	
	}
}

country_event = {
	id = tus.5
	title = tus.5.t
	desc = tus.5.d
	is_triggered_only = yes
	
	option = {
		name = tus.5.a	
		set_cosmetic_tag = ITA_EMP
		set_capital = {
			state = 2
		}
		add_ideas = {
			TUS_worker_strikes
			TUS_overwhelmed_council
		}
		if = {
			limit = {has_idea = TUS_disunified_government}
			add_ideas = TUS_council_infighting
		}
	}
}

country_event = {
	id = tus.6
	title = tus.6.t
	desc = tus.6.d
	is_triggered_only = yes
	
	option = {
		name = tus.6.a	
	}
}

country_event = {
	id = tus.7
	title = tus.7.t
	desc = tus.7.d
	is_triggered_only = yes
	
	option = {
		name = tus.7.a	
	}
}

country_event = {
	id = tus.9
	title = tus.9.t
	desc = tus.9.d
	is_triggered_only = yes
	
	option = {
		name = tus.9.a	
		ai_chance = {base = 100}
		162 = {
			add_building_construction = {
				type = bunker
				level = 2
				instant_build = yes
				province = 6973
			}
			add_building_construction = {
				type = bunker
				level = 2
				instant_build = yes
				province = 1616
			}
			add_building_construction = {
				type = bunker
				level = 2
				instant_build = yes
				province = 11889
			}
			add_building_construction = {
				type = bunker
				level = 2
				instant_build = yes
				province = 9879
			}
		}
	}
	option = {
		name = tus.9.b
		162 = {
			add_building_construction = {
				type = bunker
				level = 2
				instant_build = yes
				province = 3885
			}
			add_building_construction = {
				type = bunker
				level = 2
				instant_build = yes
				province = 9750
			}
			add_building_construction = {
				type = bunker
				level = 2
				instant_build = yes
				province = 6875
			}
			add_building_construction = {
				type = bunker
				level = 2
				instant_build = yes
				province = 9879
			}
		}
	}
}

country_event = {
	id = tus.10
	title = tus.10.t
	desc = tus.10.d
	is_triggered_only = yes
	
	option = {
		name = tus.10.a	
		add_ideas = TUS_army_reforms
		custom_effect_tooltip = TUS_army_reform_event_tooltip_1
		hidden_effect = {
			division_template = {
				name = "Militia Brigade"
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
				}
			}
			162 = {
				create_unit = {
					division = "name = \"Militia Brigade\" division_template = \"Militia Brigade\" start_experience_factor = 0"
					owner = PREV
					count = 3
				}
			}
			884 = {
				create_unit = {
					division = "name = \"Militia Brigade\" division_template = \"Militia Brigade\" start_experience_factor = 0"
					owner = PREV
					count = 3
				}
			}
		}
	}
	option = {
		name = tus.10.b
		add_ideas = TUS_army_reforms
		custom_effect_tooltip = TUS_army_reform_event_tooltip_2
		hidden_effect = {
			division_template = {
				name = "Infantry Division"
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
					infantry = { x = 1 y = 2 }

					infantry = { x = 2 y = 0 }
					infantry = { x = 2 y = 1 }
					infantry = { x = 2 y = 2 }
				}
			}
			162 = {
				create_unit = {
					division = "name = \"Infantry Division\" division_template = \"Infantry Division\" start_experience_factor = 0"
					owner = PREV
					count = 1
				}
			}
			884 = {
				create_unit = {
					division = "name = \"Infantry Division\" division_template = \"Infantry Division\" start_experience_factor = 0"
					owner = PREV
					count = 1
				}
			}
		}
	}
}

# for albania not us
country_event = {
	id = tus.8
	title = tus.8.t
	desc = tus.8.d
	is_triggered_only = yes
	
	option = {
		name = tus.8.a	
		TUS = {
			declare_war_on = {
				target = ALB
				type = annex_everything
			}
		}
	}
	
	option = {
		name = tus.8.b
		ai_chance = {base = 100}
		TUS = {
			annex_country = {
				target = ALB
				transfer_troops = yes
			}
		}
	}
}

# for france not us

country_event = {
	id = tus.11
	title = tus.11.t
	desc = tus.11.d
	
	trigger = {
		tag = FRA	
		any_country = {
			limit = {is_italian_tag = yes}
			has_war_with = FRA 
		}
		TUS = {
			has_completed_focus = TUS_french_intervention
			has_completed_focus = TUS_prepare_for_reunificatoin
			NOT = {has_completed_focus = TUS_balbos_speech_2}
			OR = {
				has_capitulated = yes
				exists = no
			}
		}
	}
	
	immediate = {
		end_puppet = TUS
		every_country = {limit = {is_italian_tag = yes has_war_with = TUS} white_peace = FRA}
	}
	
	option = {
		name = tus.11.a
	}
	
} 

## First Meeting ##
country_event = {
	id = tus_coun1.1
	title = tus_coun1.1.t
	desc = tus_coun1.1.d
	
	fire_only_once = yes
	
	trigger = {
		focus_progress = {
			focus = TUS_unify_the_party
			progress > 0
		}	
	}
	
	immediate = {
		hidden_effect = {
			country_event = {
				id = tus_coun1.2
				days = 35
			}	
		}
	}
	
	option = {
		name = tus_coun1.1.a
	}
	option = {
		name = tus_coun1.1.b
		add_ideas = a_gun_for_every_household
		custom_effect_tooltip = TUS_modify_mil_subtract_5
		subtract_from_variable = {
			var = TUS_Balbo_Pop_mil
			value = 5
		}
	}
}

country_event = {
	id = tus_coun1.2
	title = tus_coun1.2.t
	desc = tus_coun1.2.d
	is_triggered_only = yes
	
	option = {
		name = tus.5.a
		custom_effect_tooltip = TUS_modify_ppl_subtract_10
		subtract_from_variable = {
			var = TUS_Balbo_Pop_ppl
			value = 10
		}
	}
	option = {
		name = tus.5.b
		add_ideas = TUS_limited_womens_rights
		custom_effect_tooltip = TUS_modify_ppl_add_5
		custom_effect_tooltip = TUS_modify_mil_add_5
		custom_effect_tooltip = TUS_modify_gc_subtract_5
		add_to_variable = {
			var = TUS_Balbo_Pop_ppl
			value = 5
		}
		add_to_variable = {
			var = TUS_Balbo_Pop_mil
			value = 5
		}
		subtract_from_variable = {
			var = TUS_Balbo_Pop_gc
			value = 5
		}
	}
}

country_event = {
	id = tus_coun1.3
	title = tus_coun1.3.t
	desc = tus_coun1.3.d
	is_triggered_only = yes
	
	option = {
		name = tus_coun1.3.a
		add_popularity = {
			ideology = despotism
			popularity = -100
		}
		add_popularity = {
			ideology = reactionism
			popularity = -100
		}
		add_popularity = {
			ideology = authoritarian_democrat
			popularity = -100
		}
		add_popularity = {
			ideology = national_syndicalism
			popularity = 0.3
		}
		swap_ideas = {
			remove_idea = TUS_disunified_government
			add_idea = TUS_unified_government
		}
		custom_effect_tooltip = TUS_modify_gc_add_10
		add_to_variable = {
			var = TUS_Balbo_Pop_gc
			value = 10
		}
	}
}

country_event = {
	id = tus_coun1.4
	title = tus_coun1.4.t
	desc = tus_coun1.4.d
	is_triggered_only = yes
	
	option = {
		name = tus_coun1.4.a
		custom_effect_tooltip = TUS_modify_gc_subtract_20
		subtract_from_variable = {
			var = TUS_Balbo_Pop_gc
			value = 20
		}
	}
}

## Capture Events ##
country_event = {
	id = tus_cap.1
	title = tus_cap.1.t
	desc = tus_cap.1.d
	
	fire_only_once = yes
	
	trigger = {
		tag = TUS
		has_idea = TUS_unified_government
		owns_state = 159
	}
	
	option = {
		name = tus_cap.1.a
		set_country_flag = TUS_mussolini_killed
	}
	option = {
		name = tus_cap.2.a
		set_country_flag = TUS_mussolini_prison
	}
}

country_event = {
	id = tus_cap.2
	title = tus_cap.1.t
	desc = tus_cap.1.d
	
	fire_only_once = yes
	
	trigger = {
		tag = TUS
		has_idea = TUS_disunified_government
		owns_state = 159
	}
	
	option = {
		name = tus_cap.2.a
		set_country_flag = TUS_mussolini_prison
	}
}

country_event = {
	id = tus_cap.3
	title = tus_cap.2.t
	desc = tus_cap.2.d
	
	fire_only_once = yes
	
	trigger = {
		tag = TUS
		has_idea = TUS_unified_government
		owns_state = 114
	}
	
	option = {
		name = tus_cap.1.a
		set_country_flag = TUS_victor_killed
	}
	option = {
		name = tus_cap.2.a
		set_country_flag = TUS_victor_prison
	}
}

country_event = {
	id = tus_cap.4
	title = tus_cap.2.t
	desc = tus_cap.2.d
	
	fire_only_once = yes
	
	trigger = {
		tag = TUS
		has_idea = TUS_disunified_government
		owns_state = 114
	}
	
	option = {
		name = tus_cap.2.a
		set_country_flag = TUS_victor_prison
	}
	option = {
		name = tus_cap.3.a
		set_country_flag = TUS_victor_free
	}
}

## Second Meeting ##
country_event = {
	id = tus_coun2.1
	title = tus_coun2.1.t
	desc = tus_coun2.1.d
	
	fire_only_once = yes
	
	trigger = {
		focus_progress = {
			focus = TUS_restabilize_the_government
			progress > 0.4
		}	
	}
	
	option = {
		name = tus_coun2.1.a
		#Create Local Counseles
		remove_ideas = TUS_overwhelmed_council
		if = {
			limit = {has_idea = TUS_disunified_government}
			swap_ideas = {
				remove_idea = TUS_disunified_government
				add_idea = TUS_disunified_government_2
			}
		}
		if = {
			limit = {has_idea = TUS_unified_government}
			swap_ideas = {
				remove_idea = TUS_unified_government
				add_idea = TUS_disunified_government
			}
		}
	}
	
	option = {
		name = tus_coun2.1.b
		#Dont
		if = {
			limit = {has_idea = TUS_disunified_government}
			swap_ideas = {
				remove_idea = TUS_disunified_government
				add_idea = TUS_unified_government
			}
		}
	}
}

country_event = {
	id = tus_coun2.2
	title = tus_coun2.2.t
	desc = tus_coun2.2.d
	is_triggered_only = yes
	
	option = {
		name = tus_coun2.2.a
		#Purge
		if = {
			limit = {has_idea = TUS_disunified_government}
			swap_ideas = {
				remove_idea = TUS_disunified_government
				add_idea = TUS_unified_government
			}
		}
		if = {
			limit = {has_idea = TUS_disunified_government_2}
			#will do civil war
			country_event = {
				id = tus_civ_war.1
				days = 15		
			}
		}
	}
	
	option = {
		name = tus_coun2.2.b
	}
}

country_event = {
	id = tus_civ_war.1
	title = tus_civ_war.1.t
	desc = tus_civ_war.1.d
	is_triggered_only = yes
	
	option = {
		name = tus_civ_war.1.a
		hidden_effect = {
			create_dynamic_country = {
				original_tag = ROOT
				transfer_state = 157
				transfer_state = 117
				transfer_state = 156
				transfer_state = 115
				
				declare_war_on = {
					target = ROOT
					type = annex_everything
				}
				add_civil_war_target = ROOT
				
				change_tag_from = ROOT
			}
		}
	}
	option = {
		name = tus_civ_war.1.b
		hidden_effect = {
			create_dynamic_country = {
				original_tag = ROOT
				transfer_state = 157
				transfer_state = 117
				transfer_state = 156
				transfer_state = 115
				
				declare_war_on = {
					target = ROOT
					type = annex_everything
				}
				add_civil_war_target = ROOT
			}
		}
	}
}

country_event = {
	id = tus_civ_war.2
	title = tus_civ_war.2.t
	desc = tus_civ_war.2.d
	is_triggered_only = yes
	
	option = {
		name = tus_civ_war.2.a
		hidden_effect = {
		}
	}
	option = {
		name = tus_civ_war.2.b
		hidden_effect = {
			create_dynamic_country = {
				original_tag = ROOT
				transfer_state = 859
				transfer_state = 158
				transfer_state = 159
				transfer_state = 160
				transfer_state = 860
			}
		}
	}
}
