#!localisation:localisation\russian\country_SOV_l_russian.yml

add_namespace = sov_leadership
add_namespace = sov_unification
add_namespace = sov_stalin
add_namespace = sov_stalin_united
add_namespace = sov

country_event = { #Fate of the royal family
	id = sov.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event sov.1" }
	title = sov.1.t
	desc = sov.1.d
	is_triggered_only = yes
	
	option = {
		name = sov.1.a
	}
	option = {
		name = sov.1.b
	}
	option = {
		name = sov.1.c
	}
}
country_event = { #Lenin's speech
	id = sov.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event sov.2" }
	title = sov.2.t
	desc = sov.2.d
	is_triggered_only = yes
	
	option = {
		name = sov.2.a
	}
}
country_event = {
	id = sov_leadership.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event sov_leadership.1" }
	title = sov_leadership.1.t
	desc = sov_leadership.1.d
	picture = GFX_report_event_red_army_order
	is_triggered_only = yes

	option = {
		name = sov_leadership.1.a
		promote_character = SOV_joseph_stalin
		set_cosmetic_tag = SOV_stalin
		#set_power_balance = { #Unused, read bop file for details
		#	id = SOV_stalin_support
		#}
		load_focus_tree = SOV_stalin
	}
	
	option = {
		name = sov_leadership.1.b
		promote_character = SOV_alexander_bogdanov	
		set_cosmetic_tag = SOV_bogdanov
		
		set_party_name = {
			ideology = bolshevism
			long_name = SOV_BOGDANOV_LONG
			name = SOV_BOGDANOV_SHORT
		}
		load_focus_tree = SOV_bogdanov_tree
	}
	
	option = {
		name = sov_leadership.1.c
		set_politics = {
			ruling_party = libertarian_socialism
		}
		
		set_cosmetic_tag = SOV_spiridonova_regional
	}
	
	option = {
		name = sov_leadership.1.e
		
		promote_character = SOV_felix_dzerzhinsky	
		set_cosmetic_tag = SOV_felix_regional
	}
}
country_event = {
	id = sov_unification.1 #tukh
	immediate = { log = "[GetDateText]: [Root.GetName]: event powerstruggle.1" }
	title = sov_unification.1.t
	desc = sov_unification.1.d
	picture = GFX_report_event_soviet_people
	is_triggered_only = yes
	
	option = {
		name = sov_unification.1.a
		ai_chance = {
			modifier = {
				factor = 0
				
				has_opinion = {
					target = FROM
					value < 0
				}
			}
		}
		
		FROM = {
			SOV_eat_PBD_generals = yes
			PBD_mikhail_tukhachevsky = {
				remove_unit_leader_role = yes
			}
			annex_country = {
				target = PREV
				transfer_troops = no
			}
			hidden_effect = { complete_national_focus = SOV_stalin_peaceful_integration }
		}
	}
	
	option = {
		name = sov_unification.1.b	
		ai_chance = {
			modifier = {
				factor = 0
				
				has_opinion = {
					target = FROM
					value > 0
				}
			}
		}
		
		FROM = {
			declare_war_on = {
				target = PREV
				type = annex_everything
			}
			set_country_flag = SOV_PBD_rejected_ultimatum
		}
	}
}

### Stalin ###
country_event = {
	id = sov_stalin.1 #NKVD leader
	immediate = { log = "[GetDateText]: [Root.GetName]: event sov_stalin.1" }
	title = sov_stalin.1.t
	desc = sov_stalin.1.d
	picture = GFX_report_event_SOV_Felix
	is_triggered_only = yes

	option = {
		name = sov_stalin.1.a
		
		add_ideas = SOV_lavrentiy_beria_sec 
		complete_national_focus = SOV_stalin_beria_leader
	}
	
	option = {
		name = sov_stalin.1.b
		
		add_ideas = SOV_nikolai_yezhov_sec
		complete_national_focus = SOV_stalin_yezhov_leader 		
	}
	
	option = {
		name = sov_stalin.1.c
		
		add_ideas = SOV_gleb_bokii_sec 
		complete_national_focus = SOV_stalin_bokii_leader
	}
}


country_event = {
	id = sov_stalin.2 #The fate of opportunists
	immediate = { log = "[GetDateText]: [Root.GetName]: event sov_stalin.2" }
	title = sov_stalin.2.t
	desc = sov_stalin.2.d
	is_triggered_only = yes
	
	option = {
		name = sov_stalin.2.a
		
		complete_national_focus = SOV_stalin_be_useful_by_skills
	}
	option = {
		name = sov_stalin.2.b
		
		complete_national_focus = SOV_stalin_serve_the_cause_of_the_revolution_by_deed
	}
}

country_event = {
	id = sov_stalin.3 #Unification
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event sov_stalin.3"
		set_country_flag = SOV_show_easter_egg_decision
	}
	title = sov_stalin.3.t
	desc = sov_stalin.3.d
	is_triggered_only = yes
	
	option = {
		name = sov_stalin.3.a
		
		set_cosmetic_tag = SOV_stalin_united
		hidden_effect = {
			clr_country_flag = SOV_show_easter_egg_decision
			SOV_get_30s_stalin = yes
		}
		set_country_flag = SOV_united
		set_party_name = {
			ideology = bolshevism
			name = SOV_kpss
			long_name = SOV_kpss_long
		}
		load_focus_tree = SOV_stalin_united_tree
	}
}

# Unified #
news_event = {
	id = sov_stalin_united.4 #Creation of Comintern
	immediate = { log = "[GetDateText]: [Root.GetName]: event sov_stalin_united.4" }
	title = sov_stalin_united.4.t
	desc = sov_stalin_united.4.d
	is_triggered_only = yes
	
	option = {
		name = sov_stalin_united.4.procommunist
		trigger = {
			ideology_socialist = yes
		}
	}
	option = {
		name = sov_stalin_united.4.neutral
		trigger = {
			OR = {
				has_government = social_democrat
				has_government = anarchist
			}
		}
	}
	option = {
		name = sov_stalin_united.4.anticommunist
		trigger = {
			OR = {
				AND = {
					ideology_goofy_ahh = yes
					NOT = { has_government = anarchist }
				}
				AND = {
					ideology_liberal = yes
					NOT = { has_government = social_democrat }
				}
				ideology_authoritarian = yes
			}
		}
	}
}
country_event = {
	id = sov_stalin_united.5 #Invite to Comintern
	immediate = { log = "[GetDateText]: [Root.GetName]: event sov_stalin_united.3" }
	title = sov_stalin_united.5.t
	desc = sov_stalin_united.5.d
	is_triggered_only = yes
	
	option = {
		name = sov_stalin_united.5.accept
		FROM = { add_to_faction = PREV }
		
		trigger = {
			ROOT = { is_in_faction = no }
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				has_opinion = {
					target = FROM
					value > 9
				}
			}
		}
	}
	option = {
		name = sov_stalin_united.5.reject_friendly
		trigger = {
			has_opinion = {
				target = FROM
				value > -1
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				has_opinion = {
					target = FROM
					value < 10
				}
			}
		}
	}
	option = {
		name = sov_stalin_united.5.reject
		reverse_add_opinion_modifier = {
			target = FROM
			modifier = faction_traitor
		}
		log = "THIS: [THIS.GetName], FROM: [FROM.GetName]"
		trigger = {
			has_opinion = {
				target = FROM
				value < 0
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				has_opinion = {
					target = FROM
					value < 0
				}
			}
		}
	}
}